jQuery(document).ready(function(r){var c={message:null,overlayCSS:{background:"#fff",opacity:.6,cursor:"default"}};r("select.js-address-select").change(function(){var e=r(this),s=e.val();if(0<s){var a=e.closest(".order_data_column");a.block(c);var t={action:"woocommerce_json_get_address",address_id:s,security:e.data("nonce")},n=e.data("address_type");r.post(ajaxurl,t,function(e){if(r('[name^="_'+n+'_"]').each(function(){-1==wc_companies_order_fields.ignore_fields.indexOf(r(this).attr("name"))&&r(this).val("")}),e.address)for(var s in e.address){var a="_"+n+"_"+s;if(-1==wc_companies_order_fields.ignore_fields.indexOf(a)){var t=r('[name="'+a+'"]'),o=e.address[s];t.val(o),t.hasClass("js_field-state")&&t.closest(".edit_address").find(".js_field-country").data("woocommerce.stickState-"+e.address.country,o),t.trigger("change")}}},"json").always(function(e){a.unblock()})}}),r(".wc-company-search, .wc-customer-search").change(function(){var e=r(".wc-company-search"),s=r(".wc-customer-search");r(".order_data_column").block(c);var a={action:"woocommerce_json_get_user_company_addresses",company_id:e.val(),user_id:s.val()};r.post(ajaxurl,a,function(t){r("select.js-address-select").each(function(){if(optionsAsString="",t.addresses){var e=1,s="";for(var a in t.addresses)1==e&&(s+=t.addresses[a].title),optionsAsString+="<option value='"+t.addresses[a].id+"'>"+t.addresses[a].title+"</option>",e++}r(this).find("option").remove().end().append(r(optionsAsString)).closest(".form-field").find("span.select2-chosen").text(s)})},"json").always(function(e){console.log(e),r(".order_data_column").unblock()})}),r(".js-create-entity-form").submit(function(e){e.preventDefault();var a=r(this),t=a.find(".response"),o=r(a.data("search-field"));t.html(""),a.block(c),r.post(ajaxurl,r(this).serializeObject(),function(e){if(t.append(e.message),"success"==e.response){if(tb_remove(),a.trigger("reset"),o.is("select")){var s=r("<option>");s.attr("value",e.object_id).text(e.object_title),o.prepend(s)}o.val(e.object_id).trigger("change").siblings(".select2-container").find(".select2-selection__placeholder").text(e.object_title)}},"json").always(function(e){console.log(e),a.unblock()})})});