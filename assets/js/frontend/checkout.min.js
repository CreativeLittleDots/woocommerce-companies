jQuery(document).ready(function(e){e.blockUI.defaults.overlayCSS.cursor="default",Object.keys||(Object.keys=function(e){var t,a=[];for(t in e)e.hasOwnProperty(t)&&a.push(t);return a}),e("#billing_address_id, #shipping_address_id").bind("wc_companies_update_addresses",function(){var t=e(this),a=t.data("address_type"),s=e(".woocommerce-"+a+"-fields");s.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.post(woocommerce_params.ajax_url,{security:wc_companies_checkout_params.get_addresses_nonce,action:"woocommerce_json_get_addresses",address_type:a,checkout_type:e('input[name="checkout_type"]:checked').val(),company_id:e("#company_id").val()},function(c){if("success"===c.result){if(t.find("option").each(function(){e(this).val()>0&&e(this).remove()}),Object.keys(c.addresses).length)for(var n in c.addresses){n=c.addresses[n];t.append('<option value="'+n.id+'">'+n.title+"</option>")}else s.find("input, select, textarea").each(function(){e(this).attr("name")&&e(this).attr("name").indexOf(a)>-1&&e(this).val(e(this).attr("default")?e(this).attr("default"):"")});t.trigger("wc_companies_updated_addresses",[c.addresses,a])}},"json").always(function(){s.unblock(),t.is("#billing_address_id")&&e("#shipping_address_id").trigger("wc_companies_update_addresses")})}).change(function(){var t=e(this),a=t.data("address_type");container=e(".woocommerce-"+a+"-fields"),t.val()>0?(container.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.post(woocommerce_params.ajax_url,{security:wc_companies_checkout_params.get_address_nonce,action:"woocommerce_json_get_address",address_id:t.val()},function(e){e.address&&t.trigger("wc_companies_change_address",[e.address,a])},"json").always(function(e,t){container.unblock()})):(container.find("input, select, textarea").each(function(){e(this).attr("name")&&e(this).attr("name").indexOf(a)>-1&&e(this).val(e(this).attr("default")?e(this).attr("default"):"")}),container.find(".country_select, .state_select").trigger("change"))}).bind("wc_companies_change_address",function(t,a,s){var c=e(this),n=e(".woocommerce-"+s+"-fields");c.val(a.id),n.find("input, select, textarea").each(function(){if(e(this).attr("name")&&e(this).attr("name").indexOf(s)>-1){var t=e(this).attr("name").replace(s+"_","");a[t]&&!e(this).attr("bypass")&&(e(this).val(a[t]),(e(this).hasClass("country_select")||e(this).hasClass("state_select"))&&e(this).trigger("change"))}}),c.trigger("wc_companies_changed_address",[a,s])}),e("#company_id").change(function(){var t=e(this),a=e(".woocommerce-billing-fields");t.val()>0?(a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.post(woocommerce_params.ajax_url,{security:wc_companies_checkout_params.get_company_nonce,action:"woocommerce_json_get_company",company_id:t.val()},function(t){t.company&&a.find("input, select, textarea").each(function(){if(e(this).attr("name")&&e(this).attr("name").indexOf("company")>-1){var a=e(this).attr("name").replace("company_","");t.company[a]&&e(this).val(t.company[a])}}),e("#billing_address_id").trigger("wc_companies_update_addresses")},"json").always(function(){a.unblock()})):(e(".woocommerce-billing-fields, .woocommerce-shipping-fields").find("input, select, textarea").each(function(){e(this).val(e(this).attr("default")?e(this).attr("default"):"")}),e("#billing_address_id, #shipping_address_id").html('<option value="0">Add new Address</option>'),e().select2&&e("#billing_address_id, #shipping_address_id, select.address_select, select.country_select").select2())}),e('input[name="checkout_type"]').change(function(){"company"===e('input[name="checkout_type"]:checked').val()?(e(".checkout_company_fields").show(300),e("select.company_select, select.address_select, select.country_select").length&&e().select2&&e("select.company_select, select.address_select, select.country_select").select2()):(e("#company_id").val(-1),e(".checkout_company_fields").hide(300)),e("#company_id").trigger("change")})});
